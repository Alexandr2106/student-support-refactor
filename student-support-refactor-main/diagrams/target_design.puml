@startuml
interface IMessengerClient {
    +send(student_id, message)
}

interface IAuthentication {
    +get_token()
}

interface IMessageSerializer {
    +serialize(text)
}

interface IErrorHandler {
    +handle_error(error)
}

class ProviderAMessengerClient
class ProviderAAuthentication
class ProviderAMessageSerializer
class ProviderAErrorHandler

class ProviderBMessengerClient
class ProviderBAuthentication
class ProviderBMessageSerializer
class ProviderBErrorHandler

class NotificationAbstractFactory {
    +create(provider): IMessengerClient
}

class RequestHandler {
    -messenger: IMessengerClient
    +process(...)
}

RequestHandler --> IMessengerClient

ProviderAMessengerClient ..|> IMessengerClient
ProviderAMessengerClient --> ProviderAAuthentication
ProviderAMessengerClient --> ProviderAMessageSerializer
ProviderAMessengerClient --> ProviderAErrorHandler

ProviderBMessengerClient ..|> IMessengerClient
ProviderBMessengerClient --> ProviderBAuthentication
ProviderBMessengerClient --> ProviderBMessageSerializer
ProviderBMessengerClient --> ProviderBErrorHandler

NotificationAbstractFactory --> ProviderAMessengerClient : creates
NotificationAbstractFactory --> ProviderBMessengerClient : creates

note right of NotificationAbstractFactory
  Ensures consistent families:
  A-components only with A,
  B-components only with B.
end note
@enduml
