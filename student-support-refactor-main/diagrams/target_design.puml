@startuml
interface IRequestSource {
    +exists(student_id, topic): bool
    +save(student_id, topic, text): str
}

interface INotifier {
    +send(student_id, message)
}

interface IAuditLogger {
    +log(message)
}

class RequestHandler {
    -source: IRequestSource
    -notifier: INotifier
    -logger: IAuditLogger
    +process(...)
}

class DatabaseRequestSource
class FileRequestSource
class WebServiceRequestSource

class SourceFactory {
    +create_request_source(config): IRequestSource
}

RequestHandler --> IRequestSource
RequestHandler --> INotifier
RequestHandler --> IAuditLogger

DatabaseRequestSource ..|> IRequestSource
FileRequestSource ..|> IRequestSource
WebServiceRequestSource ..|> IRequestSource

SourceFactory --> DatabaseRequestSource : creates
SourceFactory --> FileRequestSource : creates
SourceFactory --> WebServiceRequestSource : creates

note right of RequestHandler
  Depends only on abstractions.
  No knowledge of concrete implementations.
end note

note left of SourceFactory
  Reads config.yaml and
  returns appropriate implementation.
end note
@enduml
